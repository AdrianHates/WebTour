<!DOCTYPE html>
<html>
<head>
  <title>Mi p치gina con funciones JavaScript</title>
  <style>
    .subrayado {
      background-color: yellow;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Mi p치gina con funciones JavaScript</h1>
  
  <p>Texto de ejemplo para subrayar:</p>
  <p id="texto">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce gravida auctor diam, ac tristique eros venenatis ac. Sed eget rhoncus purus.</p>
  
  <button onclick="subrayarTexto()">Subrayar</button>
  <button onclick="borrarSubrayado()">Borrar subrayado</button>
  
  <br><br>
  
  <textarea id="apuntes" rows="5" cols="30"></textarea>
  <br>
  <button onclick="guardarApuntes()">Guardar apuntes</button>
  
  <br><br>
  
  <h2>Bot칩n de traducci칩n de Google:</h2>
  <div id="google_translate_element"></div>

  <script>
    function subrayarTexto() {
      const seleccion = window.getSelection();
      const rango = seleccion.getRangeAt(0);
      const span = document.createElement('span');
      span.className = 'subrayado';
      rango.surroundContents(span);
    }

    function borrarSubrayado() {
  const subrayados = document.querySelectorAll('.subrayado');
  subrayados.forEach(span => {
    const fragmento = document.createDocumentFragment();
    while (span.firstChild) {
      fragmento.appendChild(span.firstChild);
    }
    span.parentNode.replaceChild(fragmento, span);
  });
}

    function guardarApuntes() {
      const apuntes = document.getElementById('apuntes').value;
      const blob = new Blob([apuntes], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'apuntes.txt';
      a.click();
    }

    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'es', includedLanguages: 'en,es', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
    }
  </script>
  
  <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>